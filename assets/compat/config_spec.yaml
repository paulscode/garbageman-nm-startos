# ==============================================================================
# Garbageman Nodes Manager - Configuration Specification
# ==============================================================================
# Defines the typed config UI for StartOS
# Documentation: https://docs.start9.com/0.3.5.x/developer-docs/specification/config-spec.html

api-port:
  type: number
  name: API Port
  description: Internal port for the API server (Fastify backend)
  nullable: false
  integral: true
  range: "[1024, 65535]"
  default: 8080
  warning: |
    Changing this port requires a service restart. Ensure it doesn't conflict 
    with other services on your StartOS device.

ui-port:
  type: number
  name: UI Port
  description: Internal port for the web UI (Next.js frontend)
  nullable: false
  integral: true
  range: "[1024, 65535]"
  default: 3000
  warning: |
    This is the internal port. External access is via Tor hidden service on port 80.
    Changing this requires a service restart.

supervisor-port:
  type: number
  name: Supervisor Port
  description: Internal port for the multi-daemon supervisor
  nullable: false
  integral: true
  range: "[1024, 65535]"
  default: 9000
  warning: |
    The supervisor manages all Bitcoin daemon instances. Changing this port 
    requires a service restart.

admin-password:
  type: string
  name: Admin Password
  description: |
    Secure password for API access. This will be used for future authentication 
    features. Store this securely.
  nullable: false
  masked: true
  copyable: true
  default:
    charset: "a-z,A-Z,0-9,!@#$%^&*"
    len: 32

log-level:
  type: enum
  name: Log Level
  description: |
    Logging verbosity for all services (API, UI, Supervisor).
    - debug: Very verbose, useful for troubleshooting
    - info: Normal operation logs (recommended)
    - warn: Only warnings and errors
    - error: Only errors
  values:
    - debug
    - info
    - warn
    - error
  value-names:
    debug: "Debug (Very Verbose)"
    info: "Info (Recommended)"
    warn: "Warnings Only"
    error: "Errors Only"
  default: info

enable-tor-proxy:
  type: boolean
  name: Enable Tor Proxy
  description: |
    Enable internal Tor SOCKS5 proxy for discovering .onion Bitcoin peers.
    Disabling this will limit peer discovery to clearnet DNS seeds only.
  default: true
  warning: |
    Disabling Tor reduces privacy and limits peer discovery to clearnet nodes.
    Tor is recommended for best privacy.

max-instances:
  type: number
  name: Maximum Instances
  description: |
    Maximum number of concurrent Bitcoin daemon instances allowed.
    Each instance requires ~10 GB RAM + 500 GB disk. Scale based on your
    available hardware resources.
  nullable: false
  integral: true
  range: "[1, 50]"
  default: 10
  units: instances
  warning: |
    Running many instances simultaneously requires significant resources.
    Monitor your system's RAM and disk usage carefully. Each full Bitcoin
    node requires approximately 10 GB RAM and 500 GB disk space.

advanced:
  type: object
  name: Advanced Settings
  description: Advanced configuration options for power users
  nullable: false
  spec:
    tor-proxy-host:
      type: string
      name: Tor Proxy Host
      description: |
        Hostname or IP address of the Tor SOCKS5 proxy. Leave default unless
        using an external Tor service.
      nullable: false
      default: "127.0.0.1"
      placeholder: "127.0.0.1"
    
    tor-proxy-port:
      type: number
      name: Tor Proxy Port
      description: Port for the Tor SOCKS5 proxy
      nullable: false
      integral: true
      range: "[1024, 65535]"
      default: 9050
    
    peer-discovery-interval:
      type: number
      name: Peer Discovery Interval
      description: |
        How often to refresh the peer discovery list (in minutes).
        Lower values = more frequent updates but higher CPU usage.
      nullable: false
      integral: true
      range: "[5, 1440]"
      default: 60
      units: minutes
    
    enable-libre-relay-detection:
      type: boolean
      name: Enable Libre Relay Detection
      description: |
        Automatically detect and tag Libre Relay nodes during peer discovery.
        Libre Relay is a Bitcoin Core fork that removes spam filters.
      default: true
    
    artifact-cache-size:
      type: number
      name: Artifact Cache Size
      description: |
        Maximum number of imported artifacts to keep cached. Older artifacts
        are automatically purged when this limit is reached. Set to 0 for unlimited.
      nullable: false
      integral: true
      range: "[0, 100]"
      default: 5
      units: artifacts
      warning: |
        Artifacts can be very large (1-10 GB each). Monitor disk space carefully.
